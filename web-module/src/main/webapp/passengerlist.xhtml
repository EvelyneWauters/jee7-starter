<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>

    <title>Passenger List</title>
</h:head>

<h:body>


<h1> All Passengers </h1>

<p:dataTable id="passengers" value="#{passengerController.findAllPassengers()}" var="passenger">
    <p:column>
        <f:facet name="header">
            <h:outputText value="Id"/>
        </f:facet>
        <h:outputText value="#{passenger.id}"/>
    </p:column>

    <p:column>
        <f:facet name="header">
            <h:outputText value="Name"/>
        </f:facet>
        <h:outputText value="#{passenger.firstName} #{passenger.lastName}"/>
    </p:column>

    <p:column>
        <f:facet name="header">
            <h:outputText value="Frequent Flyer Miles"/>
        </f:facet>
        <h:outputText value="#{passenger.frequentFlyerMiles}"/>
    </p:column>

    <p:column>
        <f:facet name="header">
            <h:outputText value="see tickets for this passenger"/>
        </f:facet>
        <h:outputText value="#{passenger.ticketList}"/>
    </p:column>

    <p:column>
        <f:facet name="header">
            <h:outputText value="tickets for this passenger"/>
        </f:facet>
        <h:outputText value="tickets">
            <p:dataTable id="tickets" value="#{ticketController.retrieveAllTickets()}" var="ticket">
                <p:column>
                    <f:facet name="header">
                        <h:outputText value="Id"/>
                    </f:facet>
                    <h:outputText value="#{ticket.id}"/>
                </p:column>
            </p:dataTable>
        </h:outputText>
    </p:column>

    <!--TODO: MAKE THIS WORK!-->
    <!--<p:column>-->
        <!--<f:facet name="header">-->
            <!--<h:outputText value="Passenger Type"/>-->
        <!--</f:facet>-->
        <!--<h:outputText value="#{passenger.passengerType}"/>-->
    <!--</p:column>-->

</p:dataTable>

<div>
    <p:button outcome="/passengercreate.xhtml" value="Add a new passenger" icon="ui-icon-star">
    </p:button>
</div>

</h:body>
</html>